<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Power BI Analytics Portal</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Three.js (3D background) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        pbi: {
                            yellow: '#f2c811',
                            dark: '#252423',
                            grey: '#605e5c',
                            lightBg: '#f3f2f1',
                            darkBg: '#1b1a19'
                        }
                    }
                }
            }
        }
    </script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Segoe+UI:wght@300;400;600;700&display=swap');

        body {
            font-family: 'Segoe UI', sans-serif;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        #three-canvas {
            position: fixed;
            inset: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            pointer-events: none;
            opacity: 0.4;
        }

        .kpi-card {
            perspective: 1000px;
        }

        .kpi-inner {
            transform-style: preserve-3d;
            transition: box-shadow 0.25s ease, transform 0.25s ease;
        }

        .kpi-card:hover .kpi-inner {
            transform: none;
            box-shadow: 0 10px 24px -12px rgba(0, 0, 0, 0.35);
        }

        .tips-card {
            perspective: 1000px;
            transform-style: preserve-3d;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);
        }

        .tips-card-inner {
            transform-style: preserve-3d;
            transition: all 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            position: relative;
        }

        .tips-card:hover .tips-card-inner {
            transform: none;
            box-shadow:
                0 16px 30px -12px rgba(0, 0, 0, 0.35),
                0 0 0 1px rgba(242, 200, 17, 0.18);
        }

        .tips-3d-icon {
            transform-style: preserve-3d;
            transition: transform 0.25s ease;
        }

        .tips-card:hover .tips-3d-icon {
            transform: scale(1.06);
        }

        .report-container {
            position: relative;
            padding-bottom: 56.25%;
            height: 0;
            overflow: hidden;
            box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.3);
        }

        .report-container iframe {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }

        .fade-in-3d {
            animation: fadeIn3D 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
        }

        @keyframes fadeIn3D {
            from {
                opacity: 0;
                transform: perspective(1000px) rotateX(-20deg) translateZ(-50px);
            }

            to {
                opacity: 1;
                transform: perspective(1000px) rotateX(0deg) translateZ(0);
            }
        }

        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-thumb {
            background: #c8c6c4;
            border-radius: 10px;
        }

        .dark ::-webkit-scrollbar-thumb {
            background: #484644;
        }
    </style>
</head>

<body class="min-h-screen flex flex-col bg-pbi-lightBg dark:bg-pbi-darkBg text-[#323130] dark:text-[#f3f2f1]">

    <canvas id="three-canvas"></canvas>

    <!-- Top bar -->
    <header
        class="relative z-10 border-b border-[#edebe9] dark:border-[#3b3a39] bg-white/80 dark:bg-[#252423]/80 backdrop-blur-md">
        <div class="max-w-6xl mx-auto flex items-center justify-between px-4 sm:px-6 h-16">
            <div class="flex items-center gap-3">
                <div class="flex items-center h-6">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"
                        class="h-6 w-auto">
                        <rect x="0" y="16" width="6" height="8" fill="#f2c811" fill-opacity="0.6" />
                        <rect x="9" y="8" width="6" height="16" fill="#f2c811" fill-opacity="0.8" />
                        <rect x="18" y="0" width="6" height="24" fill="#f2c811" />
                    </svg>
                </div>
                <div>
                    <p class="text-sm font-semibold text-[#201f1e] dark:text-white">Power BI Analytics Portal</p>
                    <p class="text-[11px] text-[#605e5c] dark:text-[#a19f9d]">Learn â€¢ Build â€¢ Analyse</p>
                </div>
            </div>

            <div class="flex items-center gap-4">
                <button id="nav-dashboard-btn"
                    class="hidden sm:inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-semibold transition-all"
                    onclick="showDashboard()">
                    Dashboard
                </button>
                <button id="nav-basics-btn"
                    class="hidden sm:inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-semibold transition-all"
                    onclick="showPowerBiBasics()">
                    Power BI Basics
                </button>
                <button onclick="toggleTheme()"
                    class="p-2 text-[#605e5c] dark:text-[#a19f9d] hover:bg-[#f3f2f1] dark:hover:bg-[#323130] rounded-full transition-all">
                    <svg id="sun-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 3v1m0 16v1m9-9h-1M4 9H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z">
                        </path>
                    </svg>
                    <svg id="moon-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                        </path>
                    </svg>
                </button>
            </div>
        </div>
    </header>

    <main class="relative z-10 flex-none">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 pt-8 pb-4 space-y-8">

            <!-- Hero -->
            <section class="grid gap-6 lg:grid-cols-[2fr,3fr] items-center">
                <div class="space-y-4">
                    <p
                        class="inline-flex items-center gap-2 px-2.5 py-1 rounded-full text-[11px] font-semibold bg-[#fff4ce] text-[#8a6d00] dark:bg-[#433519] dark:text-[#f8d375]">
                        Power BI Learning Space
                        <span class="w-1.5 h-1.5 rounded-full bg-[#107c10] animate-pulse"></span>
                    </p>
                    <h1 class="text-3xl sm:text-4xl font-bold leading-tight text-[#201f1e] dark:text-white">
                        Explore interactive <span class="text-pbi-yellow">Dashboards</span> & learn
                        <span class="text-pbi-yellow">Power BI Basics</span>
                    </h1>
                    <p class="text-sm sm:text-base text-[#605e5c] dark:text-[#a19f9d] max-w-xl">
                        Switch between a live Power BI dashboard and curated beginnerâ€‘friendly tips
                        that help you build clean, fast, beautiful reports.
                    </p>
                    <div class="flex flex-wrap gap-3 pt-2">
                        <button id="hero-dashboard-btn" onclick="showDashboard()"
                            class="inline-flex items-center justify-center px-5 py-2.5 rounded-lg text-sm font-semibold transition-all">
                            Open Dashboard
                        </button>
                        <button id="hero-basics-btn" onclick="showPowerBiBasics()"
                            class="inline-flex items-center justify-center px-5 py-2.5 rounded-lg text-sm font-semibold transition-all">
                            Learn Power BI Basics
                        </button>
                    </div>
                </div>

                <!-- Mode cards -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="kpi-card">
                        <div
                            class="kpi-inner bg-white/90 dark:bg-[#252423]/90 border border-[#edebe9] dark:border-[#3b3a39] rounded-xl p-4 shadow-md">
                            <p class="text-[10px] font-bold text-pbi-grey uppercase tracking-widest">Mode</p>
                            <p id="mode-label" class="mt-1 text-lg font-semibold">Dashboard View</p>
                            <p class="mt-2 text-[11px] text-[#605e5c] dark:text-[#a19f9d]">
                                Interactive enterpriseâ€‘style Power BI report experience.
                            </p>
                        </div>
                    </div>
                    <div class="kpi-card">
                        <div
                            class="kpi-inner bg-white/90 dark:bg-[#252423]/90 border border-[#edebe9] dark:border-[#3b3a39] rounded-xl p-4 shadow-md">
                            <p class="text-[10px] font-bold text-pbi-grey uppercase tracking-widest">Progress</p>
                            <p class="mt-1 text-lg font-semibold">Start Learning</p>
                            <p class="mt-2 text-[11px] text-[#605e5c] dark:text-[#a19f9d]">
                                Begin with basics, then explore dashboards and DAX.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Dashboard section -->
            <section id="dashboard-section" class="space-y-6 fade-in-3d">
                <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                    <div class="flex items-center gap-2">
                        <label for="dashboard-selector"
                            class="text-xs font-bold text-pbi-grey uppercase tracking-widest whitespace-nowrap">Select
                            Report:</label>
                        <select id="dashboard-selector" onchange="switchDashboard(this.value)"
                            class="bg-white dark:bg-[#252423] border border-[#edebe9] dark:border-[#3b3a39] rounded-lg px-3 py-1.5 text-sm font-semibold text-[#323130] dark:text-[#f3f2f1] focus:outline-none focus:ring-2 focus:ring-pbi-yellow/50 transition-all cursor-pointer">
                            <!-- Options populated by JS -->
                        </select>
                    </div>
                    <div id="stats-container" class="grid grid-cols-3 gap-3 flex-1 max-w-2xl">
                        <!-- Stats populated by JS -->
                    </div>
                </div>

                <div class="grid gap-6 lg:grid-cols-[3fr,2fr] items-start">
                    <div class="space-y-4">
                        <div
                            class="bg-white dark:bg-[#252423] p-1 shadow-2xl border border-[#edebe9] dark:border-[#3b3a39] rounded-lg relative overflow-hidden lg:h-[480px] flex flex-col">
                            <div id="loading-overlay"
                                class="absolute inset-0 z-20 flex flex-col items-center justify-center bg-white/95 dark:bg-[#1b1a19]/95 backdrop-blur-md transition-opacity">
                                <div
                                    class="w-12 h-12 border-4 border-pbi-yellow border-t-transparent rounded-full animate-spin">
                                </div>
                            </div>
                            <div class="report-container flex-1">
                                <iframe id="pbi-frame" title="Power BI Dashboard" src="about:blank"
                                    allowfullscreen="true" class="w-full h-full border-0"></iframe>
                            </div>
                        </div>
                    </div>

                    <aside
                        class="bg-white/90 dark:bg-[#252423]/90 backdrop-blur-sm border border-[#edebe9] dark:border-[#3b3a39] p-6 shadow-xl rounded-lg lg:h-[480px] flex flex-col">
                        <h2 id="main-title"
                            class="text-xs font-bold text-pbi-grey uppercase tracking-widest mb-5 flex-none">
                            Dashboard Insights
                        </h2>
                        <div id="explanation-content"
                            class="text-[13px] leading-relaxed flex-1 overflow-y-auto pr-2 opacity-0 transition-all duration-700">
                        </div>
                    </aside>
                </div>
            </section>

            <!-- Basics section -->
            <section id="basics-section" class="hidden space-y-6">
                <div
                    class="bg-white/90 dark:bg-[#252423]/90 border border-[#edebe9] dark:border-[#3b3a39] rounded-xl p-6 shadow-xl">
                    <h2 class="text-xl sm:text-2xl font-bold text-[#201f1e] dark:text-white mb-2">
                        Power BI Basics & Best Practices
                    </h2>
                    <p class="text-sm sm:text-base text-[#605e5c] dark:text-[#a19f9d] max-w-2xl">
                        Use these cards as a quick reference when learning or teaching Power BI â€“ from data
                        modelling to DAX, performance and report design.
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Data Modeling -->
                    <article class="tips-card h-full">
                        <div
                            class="tips-card-inner bg-gradient-to-br from-[#f3f2f1] to-[#e1dfdd] dark:from-[#323130] dark:to-[#2d2c2b] p-6 rounded-xl shadow-xl border border-[#edebe9] dark:border-[#3b3a39] hover:border-pbi-yellow/50 transition-all h-full flex flex-col">
                            <div class="flex items-center mb-4">
                                <span class="tips-3d-icon text-2xl mr-3">ðŸ“Š</span>
                                <h3 class="font-bold text-xl text-[#323130] dark:text-white">Data Modeling</h3>
                            </div>
                            <ul class="text-sm text-pbi-grey dark:text-[#a19f9d] space-y-3 flex-1">
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Prefer
                                        star schema with fact and dimension tables to simplify relationship
                                        paths.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Keep
                                        relationships simple; avoid biâ€‘directional filters which can cause
                                        ambiguity.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Hide
                                        technical keys, surrogate IDs, and unused columns from the final report
                                        view.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Give
                                        tables and columns clear, businessâ€‘friendly names for better Q&A
                                        discovery.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Implement
                                        Hierarchies for dates and locations to enable intuitive drillâ€‘down paths.</span>
                                </li>
                            </ul>
                        </div>
                    </article>

                    <!-- Visual Design -->
                    <article class="tips-card h-full">
                        <div
                            class="tips-card-inner bg-gradient-to-br from-[#f3f2f1] to-[#e1dfdd] dark:from-[#323130] dark:to-[#2d2c2b] p-6 rounded-xl shadow-xl border border-[#edebe9] dark:border-[#3b3a39] hover:border-pbi-yellow/50 transition-all h-full flex flex-col">
                            <div class="flex items-center mb-4">
                                <span class="tips-3d-icon text-2xl mr-3">ðŸŽ¨</span>
                                <h3 class="font-bold text-xl text-[#323130] dark:text-white">Visual Design</h3>
                            </div>
                            <ul class="text-sm text-pbi-grey dark:text-[#a19f9d] space-y-3 flex-1">
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Use
                                        bar/column charts for comparison and line charts for temporal trends.</span>
                                </li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Adopt a
                                        consistent colour palette and font style to maintain brand integrity.</span>
                                </li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Align all
                                        visuals to a grid layout to achieve a clean, enterpriseâ€‘grade feel.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Utilize
                                        tooltips and drillâ€‘through pages to reduce primary visual clutter.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Ensure
                                        high contrast and readable text sizes for accessibility compliance.</span></li>
                            </ul>
                        </div>
                    </article>

                    <!-- Performance -->
                    <article class="tips-card h-full">
                        <div
                            class="tips-card-inner bg-gradient-to-br from-[#f3f2f1] to-[#e1dfdd] dark:from-[#323130] dark:to-[#2d2c2b] p-6 rounded-xl shadow-xl border border-[#edebe9] dark:border-[#3b3a39] hover:border-pbi-yellow/50 transition-all h-full flex flex-col">
                            <div class="flex items-center mb-4">
                                <span class="tips-3d-icon text-2xl mr-3">âš¡</span>
                                <h3 class="font-bold text-xl text-[#323130] dark:text-white">Performance</h3>
                            </div>
                            <ul class="text-sm text-pbi-grey dark:text-[#a19f9d] space-y-3 flex-1">
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Import
                                        only the specific columns and filtered rows required for the analysis.</span>
                                </li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Prefer
                                        measures instead of calculated columns to optimize the data engine.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Limit
                                        visuals per report page and avoid using excessively complex DAX filters.</span>
                                </li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Enable
                                        Incremental Refresh for largeâ€‘scale datasets to reduce load times.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Use
                                        Performance Analyzer to pinpoint bottlenecks in visual rendering.</span></li>
                            </ul>
                        </div>
                    </article>

                    <!-- DAX Basics -->
                    <article class="tips-card h-full">
                        <div
                            class="tips-card-inner bg-gradient-to-br from-[#f3f2f1] to-[#e1dfdd] dark:from-[#323130] dark:to-[#2d2c2b] p-6 rounded-xl shadow-xl border border-[#edebe9] dark:border-[#3b3a39] hover:border-pbi-yellow/50 transition-all h-full flex flex-col">
                            <div class="flex items-center mb-4">
                                <span class="tips-3d-icon text-2xl mr-3">ðŸ”§</span>
                                <h3 class="font-bold text-xl text-[#323130] dark:text-white">DAX Basics</h3>
                            </div>
                            <ul class="text-sm text-pbi-grey dark:text-[#a19f9d] space-y-3 flex-1">
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Use VAR to
                                        simplify complex logic and improve query readability and speed.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Master Row
                                        Context vs. Filter Context to avoid common calculation errors.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Practise
                                        Time Intelligence functions like TOTALYTD and SAMEPERIODLASTYEAR.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Always
                                        document and comment your key modular measures for maintenance.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Use DIVIDE
                                        over / to handle zero-division errors gracefully and safely.</span></li>
                            </ul>
                        </div>
                    </article>

                    <!-- Sharing & Governance -->
                    <article class="tips-card h-full">
                        <div
                            class="tips-card-inner bg-gradient-to-br from-[#f3f2f1] to-[#e1dfdd] dark:from-[#323130] dark:to-[#2d2c2b] p-6 rounded-xl shadow-xl border border-[#edebe9] dark:border-[#3b3a39] hover:border-pbi-yellow/50 transition-all h-full flex flex-col">
                            <div class="flex items-center mb-4">
                                <span class="tips-3d-icon text-2xl mr-3">ðŸš€</span>
                                <h3 class="font-bold text-xl text-[#323130] dark:text-white">Sharing & Governance</h3>
                            </div>
                            <ul class="text-sm text-pbi-grey dark:text-[#a19f9d] space-y-3 flex-1">
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Publish to
                                        dedicated Workspaces and Apps for secure production distribution.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Implement
                                        Rowâ€‘Level Security (RLS) to restrict data access based on user roles.</span>
                                </li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Use
                                        Version Control for .pbix files and document every change systematically.</span>
                                </li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Apply
                                        standard Themes to maintain institutional branding across all reports.</span>
                                </li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Schedule
                                        automated refreshes to ensure data is always current for stakeholders.</span>
                                </li>
                            </ul>
                        </div>
                    </article>

                    <!-- Quick Tips -->
                    <article class="tips-card h-full">
                        <div
                            class="tips-card-inner bg-gradient-to-br from-[#f3f2f1] to-[#e1dfdd] dark:from-[#323130] dark:to-[#2d2c2b] p-6 rounded-xl shadow-xl border border-[#edebe9] dark:border-[#3b3a39] hover:border-pbi-yellow/50 transition-all h-full flex flex-col">
                            <div class="flex items-center mb-4">
                                <span class="tips-3d-icon text-2xl mr-3">ðŸ’¡</span>
                                <h3 class="font-bold text-xl text-[#323130] dark:text-white">Quick Tips</h3>
                            </div>
                            <ul class="text-sm text-pbi-grey dark:text-[#a19f9d] space-y-3 flex-1">
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Always
                                        start development by defining the core business question to solve.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Use
                                        Bookmarks and Selection panes to create guided analytical narratives.</span>
                                </li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Test
                                        reports on various screen resolutions and mobile device layouts.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Validate
                                        automated numbers with business experts to ensure data accuracy.</span></li>
                                <li class="flex items-start"><span class="text-pbi-yellow mr-2">â€¢</span><span>Regularly
                                        prune your data model of any unused measures or calculated columns.</span></li>
                            </ul>
                        </div>
                    </article>
                </div>
            </section>
        </div>
    </main>

    <!-- Footer navbar -->
    <footer class="relative z-10 bg-[#252423] border-t border-[#3b3a39] shadow-2xl">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 py-3 flex flex-col sm:flex-row items-center justify-between gap-3">
            <nav class="flex items-center justify-center gap-4">
                <button onclick="showDashboard()"
                    class="footer-nav-link px-5 py-1.5 text-sm font-semibold text-[#a19f9d] hover:text-white hover:bg-[#3b3a39] rounded-full transition-all border border-transparent hover:border-pbi-yellow">
                    Dashboard
                </button>
                <button onclick="showPowerBiBasics()"
                    class="footer-nav-link px-5 py-1.5 text-sm font-semibold text-[#a19f9d] hover:text-white hover:bg-[#3b3a39] rounded-full transition-all border border-transparent hover:border-pbi-yellow">
                    Power BI Basics
                </button>
            </nav>
            <p class="text-[11px] text-[#a19f9d] text-center sm:text-right">
                Built with a Power BIâ€‘style theme for learning & exploration.
            </p>
        </div>
    </footer>

    <script>
        // Simple dashboard config â€“ put your own Power BI URL here
        const dashboards = [
            {
                id: 'terror_analysis',
                title: 'Global Terror Analysis',
                url: 'https://app.powerbi.com/view?r=eyJrIjoiNTY4YWQxMGItNGFhMC00ZWQ4LThlZjUtMDY0NWY4OGJkYjdhIiwidCI6ImUxNGU3M2ViLTUyNTEtNDM4OC04ZDY3LThmOWYyZTJkNWE0NiIsImMiOjEwfQ%3D%3D',
                stats: [
                    { label: 'Total Incidents', value: '180K+', trend: 'â†‘ 2%', color: 'text-red-600' },
                    { label: 'Countries Covered', value: '160+', trend: 'â€”', color: 'text-gray-600' },
                    { label: 'Data Source', value: 'GTD', trend: 'Verified', color: 'text-green-600' }
                ],
                explanation: `<h4 class="text-lg font-bold mb-3 text-[#201f1e] dark:text-white">Global Terror Analysis Overview</h4>
                           <p class="mb-4 text-pbi-grey dark:text-[#a19f9d]">This analytical suite leverages the Global Terrorism Database (GTD) to visualize over 180,000 historical security events. It is engineered for intelligence analysts to identify subterranean patterns in incident frequency and geopolitical instability shifts across 160+ sovereign territories. By mapping thousands of success indicators, it reveals the strategic evolution of global conflict zones.</p>
                           <ul class="space-y-3.5 text-pbi-grey dark:text-[#a19f9d] mb-5">
                               <li class="flex items-start"><span class="text-pbi-yellow mr-2">â–¶</span><span><strong>Temporal Integrity:</strong> Monitor the ebb and flow of global activity across decades, correlating data with regional policy changes and international treaty signatures.</span></li>
                               <li class="flex items-start"><span class="text-pbi-yellow mr-2">â–¶</span><span><strong>Geographic Mapping:</strong> Utilize high-resolution heatmaps to pinpoint conflict clusters and track the migration of localized hotspots with precision.</span></li>
                               <li class="flex items-start"><span class="text-pbi-yellow mr-2">â–¶</span><span><strong>Target Intelligence:</strong> Evaluate tactical shifts between civilian, military, and infrastructure targets to predict future risk vectors and resource allocation.</span></li>
                               <li class="flex items-start"><span class="text-pbi-yellow mr-2">â–¶</span><span><strong>Weaponry Analysis:</strong> Breakdown attack methods to understand the escalation or de-escalation of munitions usage in urban environments.</span></li>
                           </ul>
                           <p class="mb-4 text-pbi-grey dark:text-[#a19f9d]"><strong>Advanced Interactions:</strong> Use the right-hand slicers to isolate specific years, groups, or modes of attack. All visuals are dynamically linked; selecting a region on the map will instantly update the success rate and casualty distribution charts.</p>
                           <p class="text-[11px] text-[#605e5c] dark:text-[#8a8886] italic border-t border-[#edebe9] dark:border-[#3b3a39] pt-4 mt-auto">Source: University of Maryland Global Terrorism Database (GTD) | Last Updated: Q4 2023</p>`
            },
            {
                id: 'learning',
                title: 'Learning Analytics Dashboard',
                url: 'https://app.powerbi.com/view?r=eyJrIjoiMDY0ZWM2MDMtY2Y2OC00NTM4LTk0ZDAtMGY5NGE1YzE1OWZlIiwidCI6ImM0YTYwOWY0LWZlMmYtNGU3Ni1hOGYxLWIzYWRiYmE3ZGEyYyIsImMiOjF9',
                stats: [
                    { label: 'Active Learners', value: '1,240', trend: 'â†‘ 12%', color: 'text-green-600' },
                    { label: 'Avg. Session', value: '18 min', trend: 'â†‘ 3.2%', color: 'text-green-600' },
                    { label: 'Completion Rate', value: '76%', trend: 'â†‘ 4.1%', color: 'text-green-600' }
                ],
                explanation: `<h4 class="text-lg font-bold mb-3 text-[#201f1e] dark:text-white">How to read this dashboard</h4>
                           <p class="mb-4 text-pbi-grey dark:text-[#a19f9d]">This executive dashboard monitors the end-to-end educational lifecycle of your learner base. By synthesizing participation data with real-time success rates, it provides administrators with a holistic view of institutional health, student engagement, and content delivery effectiveness.</p>
                           <ul class="space-y-3.5 text-pbi-grey dark:text-[#a19f9d] mb-5">
                               <li class="flex items-start"><span class="text-pbi-yellow mr-2">â–¶</span><span><strong>Completion Metrics:</strong> Track the progression of students through critical certification paths, identifying specific modules where engagement typically peaks or plateaus.</span></li>
                               <li class="flex items-start"><span class="text-pbi-yellow mr-2">â–¶</span><span><span><strong>Engagement Depth:</strong> Measure deep interactions beyond simple logins, focusing on session length, interactive resource utilization, and peer collaboration frequency.</span></li>
                               <li class="flex items-start"><span class="text-pbi-yellow mr-2">â–¶</span><span><strong>Performance Analytics:</strong> Aggregate assessment scores across different cohorts to benchmark teaching methodologies and ensure curriculum clarity.</span></li>
                               <li class="flex items-start"><span class="text-pbi-yellow mr-2">â–¶</span><span><strong>Drop-off Diagnosis:</strong> Pinpoint exactly where learners lose focus to drive rapid content iteration and proactive student retention interventions.</span></li>
                           </ul>
                           <p class="mb-4 text-pbi-grey dark:text-[#a19f9d]"><strong>Insight Integration:</strong> Hover over any bar chart to reveal drill-through tooltips that show individual student progress journeys. Use the cross-filtering feature to instantly see how increased session time directly affects higher final assessment outcomes.</p>
                           <p class="text-[11px] text-[#605e5c] dark:text-[#8a8886] italic border-t border-[#edebe9] dark:border-[#3b3a39] pt-4 mt-auto">Data Source: Learning Management System (LMS) | Pipeline: Azure Synapse Analytics</p>`
            }
        ];

        // 3D background
        let scene, camera, renderer, particles;
        let mouseX = 0, mouseY = 0;

        function initThree() {
            const canvas = document.getElementById('three-canvas');
            if (!canvas) return;

            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 60;

            renderer = new THREE.WebGLRenderer({ canvas, alpha: true });
            renderer.setSize(window.innerWidth, window.innerHeight);

            const geometry = new THREE.BufferGeometry();
            const vertices = [];
            for (let i = 0; i < 2000; i++) {
                vertices.push(
                    THREE.MathUtils.randFloatSpread(400),
                    THREE.MathUtils.randFloatSpread(200),
                    THREE.MathUtils.randFloatSpread(400)
                );
            }
            geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));
            const material = new THREE.PointsMaterial({ size: 1.5, transparent: true, opacity: 0.4 });
            particles = new THREE.Points(geometry, material);
            scene.add(particles);

            updateThreeTheme();
            animateThree();

            window.addEventListener('mousemove', (e) => {
                mouseX = (e.clientX - window.innerWidth / 2) / 200;
                mouseY = (e.clientY - window.innerHeight / 2) / 200;
            });

            window.addEventListener('resize', () => {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            });
        }

        function animateThree() {
            requestAnimationFrame(animateThree);
            if (!particles) return;
            particles.rotation.y += 0.0008;
            particles.position.x += (mouseX * 10 - particles.position.x) * 0.02;
            particles.position.y += (-mouseY * 10 - particles.position.y) * 0.02;
            renderer.render(scene, camera);
        }

        function updateThreeTheme() {
            if (!particles) return;
            const isDark = document.documentElement.classList.contains('dark');
            particles.material.color.setHex(isDark ? 0xf2c811 : 0x252423);
        }

        function toggleTheme() {
            document.documentElement.classList.toggle('dark');
            const isDark = document.documentElement.classList.contains('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            document.getElementById('sun-icon').classList.toggle('hidden', !isDark);
            document.getElementById('moon-icon').classList.toggle('hidden', isDark);
            updateThreeTheme();
        }

        function setHeroActive(mode) {
            const dashBtn = document.getElementById('hero-dashboard-btn');
            const basicsBtn = document.getElementById('hero-basics-btn');
            if (!dashBtn || !basicsBtn) return;

            const activeClass = "bg-pbi-yellow text-[#201f1e] shadow hover:shadow-lg hover:bg-[#ffd94d]";
            const inactiveClass = "bg-transparent border border-[#edebe9] dark:border-[#3b3a39] text-[#323130] dark:text-[#f3f2f1] hover:border-pbi-yellow hover:bg-[#f3f2f1] dark:hover:bg-[#323130]";

            if (mode === 'dashboard') {
                dashBtn.className = `inline-flex items-center justify-center px-5 py-2.5 rounded-lg text-sm font-semibold transition-all ${activeClass}`;
                basicsBtn.className = `inline-flex items-center justify-center px-5 py-2.5 rounded-lg text-sm font-semibold transition-all ${inactiveClass}`;
            } else {
                dashBtn.className = `inline-flex items-center justify-center px-5 py-2.5 rounded-lg text-sm font-semibold transition-all ${inactiveClass}`;
                basicsBtn.className = `inline-flex items-center justify-center px-5 py-2.5 rounded-lg text-sm font-semibold transition-all ${activeClass}`;
            }
        }

        function setNavbarActive(mode) {
            const dashBtn = document.getElementById('nav-dashboard-btn');
            const basicsBtn = document.getElementById('nav-basics-btn');
            if (!dashBtn || !basicsBtn) return;

            const activeClass = "bg-pbi-yellow text-[#201f1e] shadow hover:shadow-md hover:bg-[#ffd94d]";
            const inactiveClass = "bg-transparent border border-[#edebe9] dark:border-[#3b3a39] text-[#323130] dark:text-[#f3f2f1] hover:border-pbi-yellow hover:bg-[#f3f2f1] dark:hover:bg-[#323130]";

            if (mode === 'dashboard') {
                dashBtn.className = `hidden sm:inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-semibold transition-all ${activeClass}`;
                basicsBtn.className = `hidden sm:inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-semibold transition-all ${inactiveClass}`;
            } else {
                dashBtn.className = `hidden sm:inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-semibold transition-all ${inactiveClass}`;
                basicsBtn.className = `hidden sm:inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-semibold transition-all ${activeClass}`;
            }
        }

        function setFooterActive(mode) {
            document.querySelectorAll('.footer-nav-link').forEach(btn => {
                const isDashboard = btn.textContent.includes('Dashboard');
                const active = (mode === 'dashboard' && isDashboard) || (mode === 'basics' && !isDashboard);

                const activeClass = "bg-pbi-yellow text-[#201f1e] border-pbi-yellow shadow-md";
                const inactiveClass = "text-[#a19f9d] hover:text-white hover:bg-[#3b3a39] border-transparent hover:border-pbi-yellow";

                if (active) {
                    btn.className = `footer-nav-link px-5 py-1.5 text-sm font-semibold rounded-full transition-all border ${activeClass}`;
                } else {
                    btn.className = `footer-nav-link px-5 py-1.5 text-sm font-semibold rounded-full transition-all border ${inactiveClass}`;
                }
            });
        }

        function showDashboard() {
            document.getElementById('dashboard-section').classList.remove('hidden');
            document.getElementById('basics-section').classList.add('hidden');
            document.getElementById('mode-label').textContent = 'Dashboard View';
            setHeroActive('dashboard');
            setNavbarActive('dashboard');
            setFooterActive('dashboard');
            // Ensure the selector is updated if it exists and then switch to the selected dashboard
            const selector = document.getElementById('dashboard-selector');
            if (selector && selector.value) {
                switchDashboard(selector.value);
            } else {
                switchDashboard(dashboards[0].id); // Default to the first dashboard in the array
            }
        }

        function showPowerBiBasics() {
            document.getElementById('dashboard-section').classList.add('hidden');
            document.getElementById('basics-section').classList.remove('hidden');
            document.getElementById('mode-label').textContent = 'Power BI Basics';
            setHeroActive('basics');
            setNavbarActive('basics');
            setFooterActive('basics');
        }

        function switchDashboard(id) {
            const db = dashboards.find(d => d.id === id);
            if (!db) return;

            const loading = document.getElementById('loading-overlay');
            const iframe = document.getElementById('pbi-frame');
            const explanation = document.getElementById('explanation-content');
            const stats = document.getElementById('stats-container');
            const title = document.getElementById('main-title');

            loading.style.display = 'flex';
            loading.style.opacity = '1';
            explanation.classList.remove('fade-in-3d');
            explanation.style.opacity = '0';

            setTimeout(() => {
                title.textContent = db.title;
                iframe.src = db.url;
                explanation.innerHTML = db.explanation;
                explanation.classList.add('fade-in-3d');

                stats.innerHTML = db.stats.map((s, i) => `
                <div class="kpi-card h-full">
                    <div class="kpi-inner bg-white dark:bg-[#252423] p-3 border border-[#edebe9] dark:border-[#3b3a39] shadow-sm rounded-lg h-full fade-in-3d" style="animation-delay: ${i * 0.08}s">
                        <p class="text-[9px] font-bold text-pbi-grey uppercase tracking-widest">${s.label}</p>
                        <div class="flex items-baseline justify-between mt-1">
                            <p class="text-base font-bold">${s.value}</p>
                            <p class="text-[9px] ${s.color} font-bold px-1.5 py-0.5 bg-slate-100 dark:bg-white/5 rounded">${s.trend}</p>
                        </div>
                    </div>
                </div>
            `).join('');
            }, 200);
        }

        window.onload = () => {
            if (localStorage.getItem('theme') === 'dark') {
                document.documentElement.classList.add('dark');
                document.getElementById('sun-icon').classList.remove('hidden');
                document.getElementById('moon-icon').classList.add('hidden');
            }

            initThree();

            // Populate dashboard selector
            const selector = document.getElementById('dashboard-selector');
            if (selector) {
                selector.innerHTML = dashboards.map(db => `<option value="${db.id}">${db.title}</option>`).join('');
            }

            showDashboard();
            setFooterActive('dashboard');

            document.getElementById('pbi-frame').onload = () => {
                const loading = document.getElementById('loading-overlay');
                const explanation = document.getElementById('explanation-content');
                loading.style.opacity = '0';
                setTimeout(() => (loading.style.display = 'none'), 400);
                explanation.style.opacity = '1';
            };
        };
    </script>
</body>

</html>